{"remainingRequest":"/Users/jerry/Documents/scratch3/node_modules/babel-loader/lib/index.js!/Users/jerry/Documents/scratch3/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/jerry/Documents/scratch3/src/utils/request.js","dependencies":[{"path":"/Users/jerry/Documents/scratch3/src/utils/request.js","mtime":1583738359791},{"path":"/Users/jerry/Documents/scratch3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jerry/Documents/scratch3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jerry/Documents/scratch3/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport { Message } from 'element-ui';\nimport { getToken, setToken } from '@/utils/auth'; // Create axios instance\n// const service = axios.create({\n//   baseURL: process.env.MIX_BASE_API,\n//   // baseURL: \"http://fbilab.cc:8080\",\n//   headers: {\n//     'Content-Type': 'application/json'\n//   },\n//   timeout: 10000, // Request timeout\n// });\n\nvar service = axios.create(); // Request intercepter\n\nservice.interceptors.request.use(function (config) {\n  var token = getToken();\n\n  if (token) {\n    config.headers['Authorization'] = 'Bearer ' + getToken(); // Set JWT token\n  }\n\n  return config;\n}, function (error) {\n  // Do something with request error\n  // eslint-disable-next-line no-console\n  console.log(error); // for debug\n\n  Promise.reject(error);\n}); // response pre-processing\n\nservice.interceptors.response.use(function (response) {\n  if (response.headers.authorization) {\n    setToken(response.headers.authorization);\n    response.data.token = response.headers.authorization;\n  }\n\n  return response.data;\n}, function (error) {\n  var message = error.message;\n\n  if (error.response.data && error.response.data.errors) {\n    message = error.response.data.errors;\n  } else if (error.response.data && error.response.data.error) {\n    message = error.response.data.error;\n  }\n\n  Message({\n    message: message,\n    type: 'error',\n    duration: 5 * 1000\n  });\n  return Promise.reject(error);\n});\nexport default service;",{"version":3,"sources":["/Users/jerry/Documents/scratch3/src/utils/request.js"],"names":["axios","Message","getToken","setToken","service","create","interceptors","request","use","config","token","headers","error","console","log","Promise","reject","response","authorization","data","message","errors","type","duration"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACEC,OADF,QAEO,YAFP;AAGA,SACEC,QADF,EAEEC,QAFF,QAGO,cAHP,C,CAKA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,EAAhB,C,CAEA;;AACAD,OAAO,CAACE,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;AACR,MAAMC,KAAK,GAAGR,QAAQ,EAAtB;;AACA,MAAIQ,KAAJ,EAAW;AACTD,IAAAA,MAAM,CAACE,OAAP,CAAe,eAAf,IAAkC,YAAYT,QAAQ,EAAtD,CADS,CACiD;AAC3D;;AAED,SAAOO,MAAP;AACD,CARH,EASE,UAAAG,KAAK,EAAI;AACP;AACA;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,EAHO,CAGa;;AACpBG,EAAAA,OAAO,CAACC,MAAR,CAAeJ,KAAf;AACD,CAdH,E,CAiBA;;AACAR,OAAO,CAACE,YAAR,CAAqBW,QAArB,CAA8BT,GAA9B,CACE,UAAAS,QAAQ,EAAI;AACV,MAAIA,QAAQ,CAACN,OAAT,CAAiBO,aAArB,EAAoC;AAClCf,IAAAA,QAAQ,CAACc,QAAQ,CAACN,OAAT,CAAiBO,aAAlB,CAAR;AACAD,IAAAA,QAAQ,CAACE,IAAT,CAAcT,KAAd,GAAsBO,QAAQ,CAACN,OAAT,CAAiBO,aAAvC;AACD;;AAED,SAAOD,QAAQ,CAACE,IAAhB;AACD,CARH,EASE,UAAAP,KAAK,EAAI;AACP,MAAIQ,OAAO,GAAGR,KAAK,CAACQ,OAApB;;AACA,MAAIR,KAAK,CAACK,QAAN,CAAeE,IAAf,IAAuBP,KAAK,CAACK,QAAN,CAAeE,IAAf,CAAoBE,MAA/C,EAAuD;AACrDD,IAAAA,OAAO,GAAGR,KAAK,CAACK,QAAN,CAAeE,IAAf,CAAoBE,MAA9B;AACD,GAFD,MAEO,IAAIT,KAAK,CAACK,QAAN,CAAeE,IAAf,IAAuBP,KAAK,CAACK,QAAN,CAAeE,IAAf,CAAoBP,KAA/C,EAAsD;AAC3DQ,IAAAA,OAAO,GAAGR,KAAK,CAACK,QAAN,CAAeE,IAAf,CAAoBP,KAA9B;AACD;;AAEDX,EAAAA,OAAO,CAAC;AACNmB,IAAAA,OAAO,EAAEA,OADH;AAENE,IAAAA,IAAI,EAAE,OAFA;AAGNC,IAAAA,QAAQ,EAAE,IAAI;AAHR,GAAD,CAAP;AAKA,SAAOR,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAvBH;AA0BA,eAAeR,OAAf","sourcesContent":["import axios from 'axios';\nimport {\n  Message\n} from 'element-ui';\nimport {\n  getToken,\n  setToken\n} from '@/utils/auth';\n\n// Create axios instance\n\n// const service = axios.create({\n//   baseURL: process.env.MIX_BASE_API,\n//   // baseURL: \"http://fbilab.cc:8080\",\n//   headers: {\n//     'Content-Type': 'application/json'\n//   },\n//   timeout: 10000, // Request timeout\n// });\n\nconst service = axios.create();\n\n// Request intercepter\nservice.interceptors.request.use(\n  config => {\n    const token = getToken();\n    if (token) {\n      config.headers['Authorization'] = 'Bearer ' + getToken(); // Set JWT token\n    }\n\n    return config;\n  },\n  error => {\n    // Do something with request error\n    // eslint-disable-next-line no-console\n    console.log(error); // for debug\n    Promise.reject(error);\n  }\n);\n\n// response pre-processing\nservice.interceptors.response.use(\n  response => {\n    if (response.headers.authorization) {\n      setToken(response.headers.authorization);\n      response.data.token = response.headers.authorization;\n    }\n\n    return response.data;\n  },\n  error => {\n    let message = error.message;\n    if (error.response.data && error.response.data.errors) {\n      message = error.response.data.errors;\n    } else if (error.response.data && error.response.data.error) {\n      message = error.response.data.error;\n    }\n\n    Message({\n      message: message,\n      type: 'error',\n      duration: 5 * 1000,\n    });\n    return Promise.reject(error);\n  },\n);\n\nexport default service;"]}]}