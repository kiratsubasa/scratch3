{"remainingRequest":"/Users/jerry/Documents/scratch3/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jerry/Documents/scratch3/src/components/ListView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jerry/Documents/scratch3/src/components/ListView.vue","mtime":1583745840659},{"path":"/Users/jerry/Documents/scratch3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jerry/Documents/scratch3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jerry/Documents/scratch3/node_modules/vuetify-loader/lib/loader.js","mtime":1564062720000},{"path":"/Users/jerry/Documents/scratch3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jerry/Documents/scratch3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SearchBar from '@/components/searchBar.vue'\nimport { ListArticles } from '@/api/Articles';\nexport default {\n    components: {\n        SearchBar\n    },\n    props: ['page-title','search-placeholder','tabs'],\n    data() {\n        return {\n            pageDataNum: 8,\n            currentPage: 1,\n            totalPage: 1,\n            firstPage: '第一頁',\n            prev: '上一頁',\n            next: '下一頁',\n            finalPage: '最末頁',\n            theArticleList: [\n                {categories: [{name: ''}],tags: [{name: ''}],author: '',title: ''}\n            ],\n            selectedQuery: '',\n            searchStatus: false,\n            searchQuery: ''\n        }\n    },\n    watch: {\n        currentPage: function(page){\n            this.$router.push({query: {page: page} });\n            window.scrollTo(0,0);\n        },\n        // selectedQuery: function(query) {\n        //     this.theArticleList = this.articleList;\n        // },\n        searchQuery: function(query){\n            // if(query==null)\n            //     return\n            this.theArticleList = Object.values(this.theArticleList).filter((item)=>{\n                if(item.title.includes(query)){\n                    this.searchStatus = true;\n                    return item.title.includes(query);\n                }\n            })\n        },\n        theArticleList: function(){\n            this.pageInit();\n        },\n        '$route' (){\n            this.searchInit();\n        }\n    },\n    created() {\n        // this.ApiListArticles(2);\n    },\n    mount(){\n        this.searchInit();\n        this.pageInit();\n        // this.selectedQuery = this.$route.params.id;\n        // if(this.$route.query.page)\n            // this.currentPage = this.$route.query.page;\n    },\n    methods: {\n        ApiListArticles(id) {\n            ListArticles(id)\n                .then(response => {\n                    this.theArticleList= response.data;\n                })\n                .catch(err => {\n                console.log(err);\n            });\n        },\n        stripHTML: function(input) {\n            var output = '';\n            if(typeof(input)=='string'){\n                var output = input.replace(/(<([^>]+)>)/ig,\"\");\n                output = output.replace(/&nbsp;/ig, \"\");\n            }\n            return output;\n        },\n        pageInit: function(){\n            this.totalPage = Math.ceil(this.theArticleList.length/this.pageDataNum);\n        },\n        setPage: function(page) {\n            if (page <= 0 || page > this.totalPage) {\n                return;\n            }\n            else{\n                this.currentPage = page;\n            }\n        },\n        changePath: function(idx){\n            console.log(this.theArticleList[idx].id);\n            this.$router.push({ path: this.$route.params.section+'/page/'+this.theArticleList[idx].id})\n        },\n        searchInit: function(){\n            console.log(this.$route.query.search)\n            if(this.$route.query.search)\n                this.searchQuery = this.$route.query.search;\n            else\n                this.theArticleList = this.articleList;\n        },\n        beforeEnter: function (el) {\n            el.style.opacity = 0\n            el.style.height = 0\n        },\n        enter: function (el, done) {\n            var delay = el.dataset.index * 150\n        setTimeout(function () {\n            Velocity(\n                el,\n                { opacity: 1, height: '1.6em' },\n                { complete: done }\n                )\n            }, delay)\n        },\n        leave: function (el, done) {\n            var delay = el.dataset.index * 150\n        setTimeout(function () {\n            Velocity(\n            el,\n            { opacity: 0, height: 0 },\n            { complete: done }\n            )\n        }, delay)\n    }\n    }\n}\n\n",{"version":3,"sources":["ListView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListView.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"pug\">\n#app\n    .listPageContent\n        SearchBar.searchBar-list(:searchPlaceholder='searchPlaceholder' :search-lists='theArticleList')\n        h1#listPageTitle {{pageTitle}}\n        .markBlockContainer\n            router-link.markBlock(style=\"color: #333; text-decoration: none;\" v-for='(typ,t) in tabs' :key='t' :to=\"typ\") {{typ}}\n        transition-group(name=\"staggered-fade\" tag=\"ul\" v-bind:css=\"false\" v-on:before-enter=\"beforeEnter\" v-on:enter=\"enter\" v-on:leave=\"leave\")\n            .List(v-for=\"idx in pageDataNum\" :key=\"idx\" :data-index=\"idx\")\n                .Listbtn(v-if=\"theArticleList[idx+(currentPage-1)*pageDataNum-1]\")\n                    .ListContainer\n                        .Listhead\n                            .ListImage(v-if=\"theArticleList[idx+(currentPage-1)*pageDataNum-1].media!=null\" :style=\"{'background-image': 'url(' + theArticleList[idx+(currentPage-1)*pageDataNum-1].media.info.src + ')'}\") \n                            .listTypeContainer\n                                    router-link.ListTypeBlock(style=\"color: #333; text-decoration: none;\" v-for='(typ,t) in theArticleList[idx+(currentPage-1)*pageDataNum-1].categories' :key='t' :to=\"'/newsPage/'+typ\") {{typ.name}} \n                        .ListTextBlock(@click=\"changePath(idx+(currentPage-1)*pageDataNum-1)\")\n                            .ListTitle {{theArticleList[idx+(currentPage-1)*pageDataNum-1].title}}\n                            .ListContent {{stripHTML(theArticleList[idx+(currentPage-1)*pageDataNum-1].body)}}\n                            .dateNote 更新日期 {{theArticleList[idx+(currentPage-1)*pageDataNum-1].updated_at.split(\"T\")[0]}}\n                            //- div#downloadBtn(v-if=\"theArticleList[idx+(currentPage-1)*pageDataNum-1].content.downloadFile\")\n                            //-     a#sehref(:href='theArticleList[idx+(currentPage-1)*pageDataNum-1].content.downloadFile' download) {{theArticleList[idx+(currentPage-1)*pageDataNum-1].content.downloadText}}\n    \n        a#myhref.pageBtn.firstPage(v-if=\"currentPage!=1\" @click=\"setPage(1)\") {{ firstPage }}\n        a#myhref.pageBtn.previous(v-if=\"currentPage!=1\" @click=\"setPage(currentPage - 1)\") {{ prev }}\n        select#pageSel(v-model=\"currentPage\")\n            option(v-for=\"idx in totalPage\") {{ idx }}\n        a#myhref.pageBtn.next(v-if=\"currentPage!=totalPage\" @click=\"setPage(currentPage + 1)\") {{ next }}\n        a#myhref.pageBtn.finalPage(v-if=\"currentPage!=totalPage\" @click=\"setPage(totalPage)\") {{ finalPage }}\n</template>\n\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js\"></script>\n\n<script>\nimport SearchBar from '@/components/searchBar.vue'\nimport { ListArticles } from '@/api/Articles';\nexport default {\n    components: {\n        SearchBar\n    },\n    props: ['page-title','search-placeholder','tabs'],\n    data() {\n        return {\n            pageDataNum: 8,\n            currentPage: 1,\n            totalPage: 1,\n            firstPage: '第一頁',\n            prev: '上一頁',\n            next: '下一頁',\n            finalPage: '最末頁',\n            theArticleList: [\n                {categories: [{name: ''}],tags: [{name: ''}],author: '',title: ''}\n            ],\n            selectedQuery: '',\n            searchStatus: false,\n            searchQuery: ''\n        }\n    },\n    watch: {\n        currentPage: function(page){\n            this.$router.push({query: {page: page} });\n            window.scrollTo(0,0);\n        },\n        // selectedQuery: function(query) {\n        //     this.theArticleList = this.articleList;\n        // },\n        searchQuery: function(query){\n            // if(query==null)\n            //     return\n            this.theArticleList = Object.values(this.theArticleList).filter((item)=>{\n                if(item.title.includes(query)){\n                    this.searchStatus = true;\n                    return item.title.includes(query);\n                }\n            })\n        },\n        theArticleList: function(){\n            this.pageInit();\n        },\n        '$route' (){\n            this.searchInit();\n        }\n    },\n    created() {\n        // this.ApiListArticles(2);\n    },\n    mount(){\n        this.searchInit();\n        this.pageInit();\n        // this.selectedQuery = this.$route.params.id;\n        // if(this.$route.query.page)\n            // this.currentPage = this.$route.query.page;\n    },\n    methods: {\n        ApiListArticles(id) {\n            ListArticles(id)\n                .then(response => {\n                    this.theArticleList= response.data;\n                })\n                .catch(err => {\n                console.log(err);\n            });\n        },\n        stripHTML: function(input) {\n            var output = '';\n            if(typeof(input)=='string'){\n                var output = input.replace(/(<([^>]+)>)/ig,\"\");\n                output = output.replace(/&nbsp;/ig, \"\");\n            }\n            return output;\n        },\n        pageInit: function(){\n            this.totalPage = Math.ceil(this.theArticleList.length/this.pageDataNum);\n        },\n        setPage: function(page) {\n            if (page <= 0 || page > this.totalPage) {\n                return;\n            }\n            else{\n                this.currentPage = page;\n            }\n        },\n        changePath: function(idx){\n            console.log(this.theArticleList[idx].id);\n            this.$router.push({ path: this.$route.params.section+'/page/'+this.theArticleList[idx].id})\n        },\n        searchInit: function(){\n            console.log(this.$route.query.search)\n            if(this.$route.query.search)\n                this.searchQuery = this.$route.query.search;\n            else\n                this.theArticleList = this.articleList;\n        },\n        beforeEnter: function (el) {\n            el.style.opacity = 0\n            el.style.height = 0\n        },\n        enter: function (el, done) {\n            var delay = el.dataset.index * 150\n        setTimeout(function () {\n            Velocity(\n                el,\n                { opacity: 1, height: '1.6em' },\n                { complete: done }\n                )\n            }, delay)\n        },\n        leave: function (el, done) {\n            var delay = el.dataset.index * 150\n        setTimeout(function () {\n            Velocity(\n            el,\n            { opacity: 0, height: 0 },\n            { complete: done }\n            )\n        }, delay)\n    }\n    }\n}\n\n</script>\n\n<style lang=\"sass\">\n@import \"@/style/common.sass\"\n</style>\n\n"]}]}